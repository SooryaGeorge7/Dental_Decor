{% load static %}
<header>
    <nav class="navbar navbar-expand-md navbar-light ">
      <div class="container">
        <a class="navbar-brand nav-link" href="{% url 'home' %}">
          <img src="{{ MEDIA_URL }}favicon.ico" alt="" class="img-fluid logo-image"> | DentalDecor
        </a>

        <button class="navbar-toggler ml-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav mx-auto">
            <li class="nav-item">
              <form method="GET" action="{% url 'shop_products' %}" class="form-inline" >
                <div class="input-group w-100">
                  <label for="search" class="visually-hidden">Search</label>
                  <input class="form-control rounded-5 border search-field " type="text" name="q"
                    placeholder="Search Products Here" id="search" pattern="^(?!\s*$)[a-zA-Z ]*$" required>
                  <div class="input-group-append ">
                    <button class="form-control btn  border dental-decor-actionbtn rounded-5" type="submit" aria-label="search button">
                      <span class="icon  fw-bold">
                        <i class="bi bi-search"></i>
                      </span>
                    </button>
                  </div>
                </div>
              </form>
            </li>
          </ul>

          <!-- Navbar Links on Right (for Larger Screens) -->
          <ul class="navbar-nav">

            <li class="nav-item text-center">
              
              <div class=" flex-sm-row flex-md-column align-items-center justify-content-evenly">
              <a class="nav-link fs-5 {% if request.resolver_match.url_name == 'home' %}active{% endif %}" href="{% url 'home' %}" data-bs-toggle="tooltip" data-bs-placement="top"
              title="Home"><span class="d-md-none"><i class="bi bi-house"></i></span><span> Home </span></a>
              
              </div>
            </li>
            <li class="nav-item dropdown text-center">
              <div class=" flex-sm-row flex-md-column align-items-center justify-content-evenly">
                <a class="nav-link fs-5 dropdown-toggle {% if request.resolver_match.url_name == 'shop_products' %}active{% endif %}" href="#"  role="button"
                data-bs-toggle="dropdown" aria-expanded="false" data-bs-toggle="tooltip" data-bs-placement="top"
                title="Shop Products"><span class="d-md-none"><i class="bi bi-shop"></i></span><span> Shop </span></a>
                <ul class="dropdown-menu ">
                  <li><a class="dropdown-item" href="{% url 'shop_products' %}">All Products</a>
                  </li>
                  <li><a class="dropdown-item {% if request.resolver_match.url_name == 'shop_products' and request.GET.category == 'Wallart' %}active{% endif %}" href="{% url 'shop_products' %}?category=Wallart">Wall Art</a></li>
                  <li><a class="dropdown-item {% if request.resolver_match.url_name == 'shop_products' and request.GET.category == 'Apparel' %}active{% endif %}" href="{% url 'shop_products' %}?category=Apparel">Apparel</a></li>
                  <li><a class="dropdown-item {% if request.resolver_match.url_name == 'shop_products' and request.GET.category == 'Collectables' %}active{% endif %}" href="{% url 'shop_products' %}?category=Collectables">Collectables</a>
                  </li>
                  <li><a class="dropdown-item {% if request.resolver_match.url_name == 'shop_products' and request.GET.category == 'Educational' %}active{% endif %}" href="{% url 'shop_products' %}?category=Educational">Educational</a>
                  </li>
                </ul>
              </div>
            </li>
            
            <li class="nav-item dropdown text-center ">
              <div class="flex-sm-row flex-md-column align-items-center justify-content-evenly">
                <a class="nav-link fs-5 dropdown-toggle
                {% if request.resolver_match.url_name ==  'add_product' %}active{% endif %}
                {% if request.resolver_match.url_name ==  'profile' %}active{% endif %}
                {% if request.resolver_match.url_name ==  'account_logout' %}active{% endif %}
                {% if request.resolver_match.url_name ==  'account_login' %}active{% endif %}
                {% if request.resolver_match.url_name ==  'account_signup' %}active{% endif %}" 
                href="#" id="navbarDropdown" role="button"
                  data-bs-toggle="dropdown" aria-expanded="false" data-bs-toggle="tooltip" data-bs-placement="top"
                  title="Account">
                  <i class="bi bi-person"></i><span class="d-md-none"> Account </span>

                </a>
              
              
              <ul class="dropdown-menu ">
                {% if request.user.is_authenticated %}
                {% if request.user.is_superuser %}
                <li><a href="{% url 'add_product' %}" class="dropdown-item {% if request.resolver_match.url_name ==  'add_product' %}active{% endif %}">Product Management</a></li>
                {% endif %}
                <li><a href="{% url 'profile' %}" class="dropdown-item {% if request.resolver_match.url_name == 'profile' %}active{% endif %}">My Profile</a></li>
                <li><a href="{% url 'account_logout' %}" class="dropdown-item {% if request.resolver_match.url_name == 'account_logout' %}active{% endif %}">Logout</a></li>
                {% else %}
                <li><a class="dropdown-item {% if request.resolver_match.url_name == 'account_login' %}active{% endif %}" href="{% url 'account_login' %}">Login</a></li>
                <li><a class="dropdown-item {% if request.resolver_match.url_name == 'account_signup' %}active{% endif %}" href="{% url 'account_signup' %}">Register</a></li>
                {% endif %}
              </ul>
            </div>
            
            
          </li>
            <li class="nav-item position-relative text-center">
              <div class=" flex-sm-row flex-md-column align-items-center justify-content-evenly">
              <a class="nav-link fs-5 {% if request.resolver_match.url_name == 'wishlist' %}active{% endif %}" href="{% url 'wishlist' %}" data-bs-toggle="tooltip" data-bs-placement="top"
              title="Wishlist"><i class="bi bi-suit-heart "></i>
                {% if wishlist_count > 0 %}
                <span class="badge count  badge-sm rounded-pill position-absolute  translate-middle">{{ wishlist_count}}</span>
                {% endif %}
                <span class="d-md-none"> Wishlist </span>
              </a>
            </div>
            </li>
            <li class="nav-item position-relative text-center">
              <div class=" flex-sm-row flex-md-column align-items-center justify-content-evenly">
              <a class="{% if total %} fw-bold{% else %}text-black{% endif %} nav-link fs-5 {% if request.resolver_match.url_name == 'view_shoppingbag' %}active{% endif %}"
                href="{% url 'view_shoppingbag' %}" data-bs-toggle="tooltip" data-bs-placement="top"
                title="Shopping Cart">


                <i class="bi bi-cart3"></i>
                {% if product_count > 0 %}
                <span class="badge count badge-sm rounded-pill position-absolute  translate-middle">{{ product_count}}</span>
                {% endif %}
                <div class="navbar-price  position-absolute start-0 d-none d-md-block badge-sm rounded-pill text-bg-warning">
                  {% if total %}
                   €{{ total|floatformat:2 }}
                  {% else %}
                  €0.00
                  {% endif %}
                </div>
                <span class="d-md-none  navbar-price badge-sm rounded-pill text-bg-warning ">
                  {% if total %}
                    €{{ total|floatformat:2 }}
                  {% else %}
                    €0.00
                  {% endif %}
                  
                </span>
                <span class="d-md-none"> Shopping Bag </span>
              </a>
              
            </div>

            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>